/*! For license information please see calculation-chunk.js.LICENSE.txt */
(this.webpackChunkCoCreate_cursors=this.webpackChunkCoCreate_cursors||[]).push([["calculation-chunk"],{"../CoCreate-calculation/src/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.default = void 0;\n\nvar _observer = _interopRequireDefault(__webpack_require__(/*! @cocreate/observer */ \"../CoCreate-observer/src/index.js\"));\n\nvar _crdt = _interopRequireDefault(__webpack_require__(/*! @cocreate/crdt */ \"../CoCreate-crdt/src/index.js\"));\n\nvar _crudClient = _interopRequireDefault(__webpack_require__(/*! @cocreate/crud-client */ \"../CoCreate-crud-client/src/index.js\"));\n\nvar _input = _interopRequireDefault(__webpack_require__(/*! @cocreate/input */ \"../CoCreate-input/src/index.js\"));\n\nvar _floatingLabel = _interopRequireDefault(__webpack_require__(/*! @cocreate/floating-label */ \"../CoCreate-floating-label/src/index.js\"));\n\nvar _htmltags = _interopRequireDefault(__webpack_require__(/*! @cocreate/htmltags */ \"../CoCreate-htmltags/src/index.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CoCreateCalculation = {\n  init: function () {\n    this.initCalculationElements();\n  },\n  initCalculationElements: function (container) {\n    const mainContainer = container || document;\n\n    if (!mainContainer.querySelectorAll) {\n      return;\n    }\n\n    let calculationElements = mainContainer.querySelectorAll('[data-calculation]') || [];\n    calculationElements = Array.from(calculationElements);\n\n    if (mainContainer != document && mainContainer.hasAttribute('data-calculation')) {\n      calculationElements.push(mainContainer);\n    }\n\n    for (let i = 0; i < calculationElements.length; i++) {\n      if (_observer.default.getInitialized(calculationElements[i], \"calculation_init\")) {\n        return;\n      }\n\n      _observer.default.setInitialized(calculationElements[i], \"calculation_init\");\n\n      this.initCalculationElement(calculationElements[i]);\n    }\n  },\n  initCalculationElement: function (ele) {\n    const self = this;\n    let data_calculation = ele.getAttribute('data-calculation');\n    let ids = this.getIds(data_calculation);\n    let selectors = [];\n\n    for (let i = 0; i < ids.length; i++) {\n      let id = ids[i];\n      let input = null;\n\n      try {\n        input = document.querySelector(id);\n      } catch (error) {\n        input = null;\n      }\n\n      if (input) {\n        input.addEventListener('input', function () {\n          self.setCalcationResult(ele);\n        });\n        input.addEventListener('CoCreateInput-setvalue', function () {// self.setCalcationResult(ele)\n        });\n\n        if (input.hasAttribute('data-calculation')) {\n          input.addEventListener('changedCalcValue', function (e) {\n            self.setCalcationResult(ele);\n          });\n        }\n      } else {\n        //. add event of special operator\n        let selector = this.__getOperatorSelector(id);\n\n        if (selector) {\n          selectors.push(selector);\n        }\n      }\n    }\n\n    if (selectors.length > 0) {\n      document.addEventListener('changedCalcValue', function (e) {\n        let isMatched = false;\n        selectors.forEach(selector => {\n          if (e.target.matches(selector)) {\n            isMatched = true;\n            return;\n          }\n        });\n\n        if (isMatched) {\n          self.setCalcationResult(ele);\n        }\n      });\n    }\n  },\n\n  __getOperatorSelector(value) {\n    let result = /SUM\\(\\s*([\\w\\W]+)\\s*\\)/g.exec(value);\n\n    if (result && result[1]) {\n      return result[1].trim();\n    }\n\n    return null;\n  },\n\n  calculationSpecialOperator(value) {\n    let self = this;\n    let sum = null;\n    let result = /SUM\\(\\s*([\\w\\W]+)\\s*\\)/g.exec(value);\n\n    if (result) {\n      let selector = result[1].trim();\n\n      if (value.trim().indexOf('SUM') == 0) {\n        let elements = document.querySelectorAll(selector);\n        sum = 0;\n        elements.forEach(el => {\n          let tmpValue = self.__getElementValue(el);\n\n          tmpValue = Number(tmpValue);\n\n          if (!Number.isNaN(tmpValue)) {\n            sum += tmpValue;\n          }\n        });\n      }\n    }\n\n    return sum;\n  },\n\n  setCalcationResult: function (ele) {\n    let data_calculation = ele.getAttribute('data-calculation');\n    let calString = this.replaceIdWithValue(data_calculation);\n\n    if (calString) {\n      let result = calculation(calString);\n\n      if (ele.tagName == 'INPUT' || ele.tagName == 'TEXTAREA' || ele.tagName == 'SELECT') {\n        ele.value = result;\n\n        if (_crudClient.default.isCRDT(ele)) {\n          ele.value = \"\";\n\n          _crdt.default.replaceText({\n            collection: ele.getAttribute('data-collection'),\n            document_id: ele.getAttribute('data-document_id'),\n            name: ele.getAttribute('name'),\n            value: result.toString()\n          });\n        } else {\n          _input.default.save(ele);\n        }\n\n        if (_floatingLabel.default) {\n          _floatingLabel.default.update(ele, ele.value);\n        }\n      } else {\n        ele.innerHTML = result;\n\n        _htmltags.default.saveContent(ele);\n      } //. set custom event\n\n\n      var event = new CustomEvent('changedCalcValue', {\n        bubbles: true\n      });\n      ele.dispatchEvent(event);\n    }\n  },\n  __getElementValue: function (element) {\n    if (element.tagName == 'INPUT' || element.tagName == 'TEXTAREA' || element.tagName == 'SELECT') {\n      return element.value;\n    } else {\n      return element.innerHTML;\n    }\n  },\n  replaceIdWithValue: function (data_calculation) {\n    let ids = this.getIds(data_calculation);\n\n    for (let i = 0; i < ids.length; i++) {\n      let id = ids[i];\n      let input = null;\n\n      try {\n        input = document.querySelector(id);\n      } catch (error) {\n        input = null;\n      }\n\n      let value = null;\n\n      if (input) {\n        value = Number(this.__getElementValue(input));\n      } else {\n        value = this.calculationSpecialOperator(id);\n      }\n\n      if (value != null && !Number.isNaN(value)) {\n        data_calculation = data_calculation.replaceAll('{' + id + '}', value);\n      }\n    }\n\n    return data_calculation;\n  },\n  getIds: function (string) {\n    let tmp = string;\n    let ids = [];\n    if (!tmp) return ids;\n\n    while (tmp.length > 0) {\n      let firstIndex = tmp.indexOf('{');\n      let secondIndex = tmp.indexOf('}', firstIndex);\n\n      if (firstIndex > -1 && secondIndex > -1) {\n        let id = tmp.substring(firstIndex + 1, secondIndex);\n        if (ids.indexOf(id) == -1) ids.push(id);\n        tmp = tmp.substring(secondIndex + 1);\n      } else {\n        return ids;\n      }\n    }\n\n    return ids;\n  }\n};\n\nfunction calculation(string) {\n  let index1, index2, index3, index4;\n  index1 = string.indexOf('+');\n  index2 = string.indexOf('-');\n  index3 = string.indexOf('*');\n  index4 = string.indexOf('/');\n\n  if (index1 > -1) {\n    let lStr = string.substr(0, index1);\n    let rStr = string.substr(index1 + 1);\n    return calculation(lStr) + calculation(rStr);\n  } else if (index2 > -1) {\n    let lStr = string.substr(0, index2);\n    let rStr = string.substr(index2 + 1);\n    return calculation(lStr) - calculation(rStr);\n  } else if (index3 > -1) {\n    let lStr = string.substr(0, index3);\n    let rStr = string.substr(index3 + 1);\n    return calculation(lStr) * calculation(rStr);\n  } else if (index4 > -1) {\n    let lStr = string.substr(0, index4);\n    let rStr = string.substr(index4 + 1);\n    let lValue = calculation(lStr);\n    let rValue = calculation(rStr);\n\n    if (rValue == 0) {\n      return 0;\n    } else {\n      return lValue / rValue;\n    }\n  } else {\n    let result = Number(string);\n\n    if (isNaN(result)) {\n      return 0;\n    } else {\n      return result;\n    }\n  }\n}\n\nCoCreateCalculation.init();\n\n_observer.default.init({\n  name: 'CoCreateCalculationChangeValue',\n  observe: ['attributes'],\n  attributes: ['value'],\n  include: 'input',\n  callback: function (mutation) {\n    console.log('-----------------------------------------------------');\n    console.log(mutation.target);\n  }\n});\n\n_observer.default.init({\n  name: 'CoCreateCalculationInit',\n  observe: ['subtree', 'childList'],\n  include: '[data-calculation]',\n  callback: function (mutation) {\n    CoCreateCalculation.initCalculationElements(mutation.target);\n  }\n});\n\nvar _default = CoCreateCalculation;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5jdXJzb3JzLy4uL0NvQ3JlYXRlLWNhbGN1bGF0aW9uL3NyYy9pbmRleC5qcz8wZjM3Il0sIm5hbWVzIjpbIkNvQ3JlYXRlQ2FsY3VsYXRpb24iLCJpbml0IiwiaW5pdENhbGN1bGF0aW9uRWxlbWVudHMiLCJjb250YWluZXIiLCJtYWluQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FsY3VsYXRpb25FbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsImhhc0F0dHJpYnV0ZSIsInB1c2giLCJpIiwibGVuZ3RoIiwiQ29DcmVhdGVPYnNlcnZlciIsImdldEluaXRpYWxpemVkIiwic2V0SW5pdGlhbGl6ZWQiLCJpbml0Q2FsY3VsYXRpb25FbGVtZW50IiwiZWxlIiwic2VsZiIsImRhdGFfY2FsY3VsYXRpb24iLCJnZXRBdHRyaWJ1dGUiLCJpZHMiLCJnZXRJZHMiLCJzZWxlY3RvcnMiLCJpZCIsImlucHV0IiwicXVlcnlTZWxlY3RvciIsImVycm9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldENhbGNhdGlvblJlc3VsdCIsImUiLCJzZWxlY3RvciIsIl9fZ2V0T3BlcmF0b3JTZWxlY3RvciIsImlzTWF0Y2hlZCIsImZvckVhY2giLCJ0YXJnZXQiLCJtYXRjaGVzIiwidmFsdWUiLCJyZXN1bHQiLCJleGVjIiwidHJpbSIsImNhbGN1bGF0aW9uU3BlY2lhbE9wZXJhdG9yIiwic3VtIiwiaW5kZXhPZiIsImVsZW1lbnRzIiwiZWwiLCJ0bXBWYWx1ZSIsIl9fZ2V0RWxlbWVudFZhbHVlIiwiTnVtYmVyIiwiaXNOYU4iLCJjYWxTdHJpbmciLCJyZXBsYWNlSWRXaXRoVmFsdWUiLCJjYWxjdWxhdGlvbiIsInRhZ05hbWUiLCJjcnVkIiwiaXNDUkRUIiwiY3JkdCIsInJlcGxhY2VUZXh0IiwiY29sbGVjdGlvbiIsImRvY3VtZW50X2lkIiwibmFtZSIsInRvU3RyaW5nIiwiQ29DcmVhdGVJbnB1dCIsInNhdmUiLCJmbG9hdGluZ0xhYmVsIiwidXBkYXRlIiwiaW5uZXJIVE1MIiwiaHRtbHRhZ3MiLCJzYXZlQ29udGVudCIsImV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJidWJibGVzIiwiZGlzcGF0Y2hFdmVudCIsImVsZW1lbnQiLCJyZXBsYWNlQWxsIiwic3RyaW5nIiwidG1wIiwiZmlyc3RJbmRleCIsInNlY29uZEluZGV4Iiwic3Vic3RyaW5nIiwiaW5kZXgxIiwiaW5kZXgyIiwiaW5kZXgzIiwiaW5kZXg0IiwibFN0ciIsInN1YnN0ciIsInJTdHIiLCJsVmFsdWUiLCJyVmFsdWUiLCJvYnNlcnZlIiwiYXR0cmlidXRlcyIsImluY2x1ZGUiLCJjYWxsYmFjayIsIm11dGF0aW9uIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsSUFBSUEsbUJBQW1CLEdBQUc7QUFDeEJDLE1BQUksRUFBRSxZQUFXO0FBQ2YsU0FBS0MsdUJBQUw7QUFDRCxHQUh1QjtBQU14QkEseUJBQXVCLEVBQUUsVUFBU0MsU0FBVCxFQUFvQjtBQUMzQyxVQUFNQyxhQUFhLEdBQUdELFNBQVMsSUFBSUUsUUFBbkM7O0FBQ0EsUUFBSSxDQUFDRCxhQUFhLENBQUNFLGdCQUFuQixFQUFxQztBQUNuQztBQUNEOztBQUNELFFBQUlDLG1CQUFtQixHQUFHSCxhQUFhLENBQUNFLGdCQUFkLENBQStCLG9CQUEvQixLQUF3RCxFQUFsRjtBQUNBQyx1QkFBbUIsR0FBR0MsS0FBSyxDQUFDQyxJQUFOLENBQVdGLG1CQUFYLENBQXRCOztBQUVBLFFBQUlILGFBQWEsSUFBSUMsUUFBakIsSUFBNkJELGFBQWEsQ0FBQ00sWUFBZCxDQUEyQixrQkFBM0IsQ0FBakMsRUFBaUY7QUFDL0VILHlCQUFtQixDQUFDSSxJQUFwQixDQUF5QlAsYUFBekI7QUFDRDs7QUFFRCxTQUFLLElBQUlRLENBQUMsR0FBQyxDQUFYLEVBQWNBLENBQUMsR0FBQ0wsbUJBQW1CLENBQUNNLE1B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QUFULEVBQW1CO0FBQzVCOUYsdUJBQW1CLENBQUNFLHVCQUFwQixDQUE0QzRGLFFBQVEsQ0FBQzFELE1BQXJEO0FBQ0E7QUFOb0IsQ0FBdEI7O2VBU2VwQyxtQiIsImZpbGUiOiIuLi9Db0NyZWF0ZS1jYWxjdWxhdGlvbi9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29DcmVhdGVPYnNlcnZlciBmcm9tICdAY29jcmVhdGUvb2JzZXJ2ZXInXG5pbXBvcnQgY3JkdCBmcm9tICdAY29jcmVhdGUvY3JkdCdcbmltcG9ydCBjcnVkIGZyb20gJ0Bjb2NyZWF0ZS9jcnVkLWNsaWVudCdcbmltcG9ydCBDb0NyZWF0ZUlucHV0IGZyb20gJ0Bjb2NyZWF0ZS9pbnB1dCdcbmltcG9ydCBmbG9hdGluZ0xhYmVsIGZyb20gJ0Bjb2NyZWF0ZS9mbG9hdGluZy1sYWJlbCdcbmltcG9ydCBodG1sdGFncyBmcm9tICdAY29jcmVhdGUvaHRtbHRhZ3MnXG5cbnZhciBDb0NyZWF0ZUNhbGN1bGF0aW9uID0ge1xuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmluaXRDYWxjdWxhdGlvbkVsZW1lbnRzKCk7XG4gIH0sXG4gICAgXG4gICAgXG4gIGluaXRDYWxjdWxhdGlvbkVsZW1lbnRzOiBmdW5jdGlvbihjb250YWluZXIpIHtcbiAgICBjb25zdCBtYWluQ29udGFpbmVyID0gY29udGFpbmVyIHx8IGRvY3VtZW50O1xuICAgIGlmICghbWFpbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBjYWxjdWxhdGlvbkVsZW1lbnRzID0gbWFpbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jYWxjdWxhdGlvbl0nKSB8fCBbXTtcbiAgICBjYWxjdWxhdGlvbkVsZW1lbnRzID0gQXJyYXkuZnJvbShjYWxjdWxhdGlvbkVsZW1lbnRzKTtcbiAgICBcbiAgICBpZiAobWFpbkNvbnRhaW5lciAhPSBkb2N1bWVudCAmJiBtYWluQ29udGFpbmVyLmhhc0F0dHJpYnV0ZSgnZGF0YS1jYWxjdWxhdGlvbicpKSB7XG4gICAgICBjYWxjdWxhdGlvbkVsZW1lbnRzLnB1c2gobWFpbkNvbnRhaW5lcik7ICBcbiAgICB9XG4gICAgXG4gICAgZm9yIChsZXQgaT0wOyBpPGNhbGN1bGF0aW9uRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBcdGlmIChDb0NyZWF0ZU9ic2VydmVyLmdldEluaXRpYWxpemVkKGNhbGN1bGF0aW9uRWxlbWVudHNbaV0sIFwiY2FsY3VsYXRpb25faW5pdFwiKSkge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG4gIFx0XHRDb0NyZWF0ZU9ic2VydmVyLnNldEluaXRpYWxpemVkKGNhbGN1bGF0aW9uRWxlbWVudHNbaV0sIFwiY2FsY3VsYXRpb25faW5pdFwiKVxuICBcdFx0XG4gICAgICB0aGlzLmluaXRDYWxjdWxhdGlvbkVsZW1lbnQoY2FsY3VsYXRpb25FbGVtZW50c1tpXSk7ICBcbiAgICB9XG4gICAgXG4gIH0sXG4gICAgXG4gIGluaXRDYWxjdWxhdGlvbkVsZW1lbnQ6IGZ1bmN0aW9uKGVsZSkge1xuICAgIFxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICBsZXQgZGF0YV9jYWxjdWxhdGlvbiA9IGVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsY3VsYXRpb24nKTtcbiAgICAgIGxldCBpZHMgPSB0aGlzLmdldElkcyhkYXRhX2NhbGN1bGF0aW9uKTtcblxuICAgICAgbGV0IHNlbGVjdG9ycyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGlkID0gaWRzW2ldO1xuICAgICAgICBcbiAgICAgICAgbGV0IGlucHV0ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikgeyBpbnB1dCA9IG51bGw7IH1cbiAgICAgICAgXG4gICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnNldENhbGNhdGlvblJlc3VsdChlbGUpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignQ29DcmVhdGVJbnB1dC1zZXR2YWx1ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBzZWxmLnNldENhbGNhdGlvblJlc3VsdChlbGUpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaW5wdXQuaGFzQXR0cmlidXRlKCdkYXRhLWNhbGN1bGF0aW9uJykpIHtcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZWRDYWxjVmFsdWUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIHNlbGYuc2V0Q2FsY2F0aW9uUmVzdWx0KGVsZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vLiBhZGQgZXZlbnQgb2Ygc3BlY2lhbCBvcGVyYXRvclxuICAgICAgICAgIFxuICAgICAgICAgIGxldCBzZWxlY3RvciA9IHRoaXMuX19nZXRPcGVyYXRvclNlbGVjdG9yKGlkKTtcbiAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc2VsZWN0b3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlZENhbGNWYWx1ZScsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgIGxldCBpc01hdGNoZWQgPSBmYWxzZTtcbiAgICAgICAgICBzZWxlY3RvcnMuZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgaXNNYXRjaGVkID0gdHJ1ZTsgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBpZiAoaXNNYXRjaGVkKSB7XG4gICAgICAgICAgICBzZWxmLnNldENhbGNhdGlvblJlc3VsdChlbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgfSxcbiAgXG4gIF9fZ2V0T3BlcmF0b3JTZWxlY3Rvcih2YWx1ZSkge1xuICAgIGxldCByZXN1bHQgPSAvU1VNXFwoXFxzKihbXFx3XFxXXSspXFxzKlxcKS9nLmV4ZWModmFsdWUpO1xuICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0WzFdKSB7XG4gICAgICByZXR1cm4gcmVzdWx0WzFdLnRyaW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIFxuICBjYWxjdWxhdGlvblNwZWNpYWxPcGVyYXRvcih2YWx1ZSkge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQgc3VtID0gbnVsbDtcbiAgICBsZXQgcmVzdWx0ID0gL1NVTVxcKFxccyooW1xcd1xcV10rKVxccypcXCkvZy5leGVjKHZhbHVlKTtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBsZXQgc2VsZWN0b3IgPSByZXN1bHRbMV0udHJpbSgpXG4gICAgICBcbiAgICAgIGlmICh2YWx1ZS50cmltKCkuaW5kZXhPZignU1VNJykgPT0gMCkge1xuICAgICAgICBsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKVxuICAgICAgICBzdW0gPSAwO1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICBsZXQgdG1wVmFsdWUgPSBzZWxmLl9fZ2V0RWxlbWVudFZhbHVlKGVsKTtcbiAgICAgICAgICB0bXBWYWx1ZSA9IE51bWJlcih0bXBWYWx1ZSk7XG4gICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4odG1wVmFsdWUpKSB7XG4gICAgICAgICAgICBzdW0gKz0gdG1wVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gXG4gICAgcmV0dXJuIHN1bVxuICB9LFxuICBcbiAgICBcbiAgc2V0Q2FsY2F0aW9uUmVzdWx0OiBmdW5jdGlvbihlbGUpIHtcbiAgICBsZXQgZGF0YV9jYWxjdWxhdGlvbiA9IGVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsY3VsYXRpb24nKTtcbiAgICBcbiAgICBsZXQgY2FsU3RyaW5nID0gdGhpcy5yZXBsYWNlSWRXaXRoVmFsdWUoZGF0YV9jYWxjdWxhdGlvbik7XG4gICAgXG4gICAgaWYgKGNhbFN0cmluZykge1xuICAgICAgbGV0IHJlc3VsdCA9IGNhbGN1bGF0aW9uKGNhbFN0cmluZyk7XG4gICAgICBpZiAoZWxlLnRhZ05hbWUgPT0gJ0lOUFVUJyB8fCBlbGUudGFnTmFtZSA9PSAnVEVYVEFSRUEnIHx8IGVsZS50YWdOYW1lID09ICdTRUxFQ1QnKSB7XG4gICAgICAgIGVsZS52YWx1ZSA9IHJlc3VsdFxuICAgICAgICBcbiAgICAgICAgaWYgKGNydWQuaXNDUkRUKGVsZSkpIHtcbiAgICAgICAgICBlbGUudmFsdWUgPSBcIlwiO1xuICAgICAgICAgIGNyZHQucmVwbGFjZVRleHQoe1xuICAgICAgICAgICAgY29sbGVjdGlvbjogZWxlLmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xsZWN0aW9uJyksXG4gICAgICAgICAgICBkb2N1bWVudF9pZDogZWxlLmdldEF0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcpLFxuICAgICAgICAgICAgbmFtZTogZWxlLmdldEF0dHJpYnV0ZSgnbmFtZScpLFxuICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC50b1N0cmluZygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBDb0NyZWF0ZUlucHV0LnNhdmUoZWxlKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGZsb2F0aW5nTGFiZWwpICAge1xuICAgICAgICAgIGZsb2F0aW5nTGFiZWwudXBkYXRlKGVsZSwgZWxlLnZhbHVlKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGUuaW5uZXJIVE1MID0gcmVzdWx0O1xuICAgICAgICBodG1sdGFncy5zYXZlQ29udGVudChlbGUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLy4gc2V0IGN1c3RvbSBldmVudFxuICAgICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaGFuZ2VkQ2FsY1ZhbHVlJywge1xuICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgfSlcbiAgICAgIGVsZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgXG4gIH0sXG4gIFxuICBfX2dldEVsZW1lbnRWYWx1ZTogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT0gJ0lOUFVUJyB8fCBlbGVtZW50LnRhZ05hbWUgPT0gJ1RFWFRBUkVBJyB8fCBlbGVtZW50LnRhZ05hbWUgPT0gJ1NFTEVDVCcpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5pbm5lckhUTUw7XG4gICAgfVxuICB9LFxuICAgIFxuICByZXBsYWNlSWRXaXRoVmFsdWU6IGZ1bmN0aW9uKGRhdGFfY2FsY3VsYXRpb24pIHtcbiAgICBsZXQgaWRzID0gdGhpcy5nZXRJZHMoZGF0YV9jYWxjdWxhdGlvbik7XG5cbiAgICBmb3IgKGxldCBpPTA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBpZCA9IGlkc1tpXTtcbiAgICAgIFxuICAgICAgbGV0IGlucHV0ID0gbnVsbDtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlkKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7IGlucHV0ID0gbnVsbDsgfVxuICAgICAgXG4gICAgICBsZXQgdmFsdWUgPSBudWxsO1xuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIHZhbHVlID0gTnVtYmVyKHRoaXMuX19nZXRFbGVtZW50VmFsdWUoaW5wdXQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5jYWxjdWxhdGlvblNwZWNpYWxPcGVyYXRvcihpZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmICFOdW1iZXIuaXNOYU4odmFsdWUpKSB7XG4gICAgICAgIGRhdGFfY2FsY3VsYXRpb24gPSBkYXRhX2NhbGN1bGF0aW9uLnJlcGxhY2VBbGwoJ3snICsgaWQgKyAnfScsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRhdGFfY2FsY3VsYXRpb247XG4gIH0sXG4gICAgXG4gIGdldElkczogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgbGV0IHRtcCA9IHN0cmluZztcbiAgICBcbiAgICBsZXQgaWRzID0gW11cbiAgICBpZiAoIXRtcCkgcmV0dXJuIGlkcztcbiAgICB3aGlsZSAodG1wLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBmaXJzdEluZGV4ID0gdG1wLmluZGV4T2YoJ3snKTtcbiAgICAgIGxldCBzZWNvbmRJbmRleCA9IHRtcC5pbmRleE9mKCd9JywgZmlyc3RJbmRleCk7XG4gICAgICBcbiAgICAgIGlmIChmaXJzdEluZGV4ID4gLTEgJiYgc2Vjb25kSW5kZXggPiAtMSkge1xuICAgICAgICBsZXQgaWQgPSB0bXAuc3Vic3RyaW5nKGZpcnN0SW5kZXggKyAxLCBzZWNvbmRJbmRleCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaWRzLmluZGV4T2YoaWQpID09IC0xKSBpZHMucHVzaChpZCk7XG4gIFxuICAgICAgICB0bXAgPSB0bXAuc3Vic3RyaW5nKHNlY29uZEluZGV4ICsgMSk7XG4gICAgICAgIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGlkcztcbiAgfSxcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRpb24oc3RyaW5nKSB7XG4gIGxldCBpbmRleDEsIGluZGV4MiwgaW5kZXgzLCBpbmRleDQ7XG4gIFxuICBpbmRleDEgPSBzdHJpbmcuaW5kZXhPZignKycpO1xuICBpbmRleDIgPSBzdHJpbmcuaW5kZXhPZignLScpO1xuICBpbmRleDMgPSBzdHJpbmcuaW5kZXhPZignKicpO1xuICBpbmRleDQgPSBzdHJpbmcuaW5kZXhPZignLycpO1xuICBcbiAgXG4gIGlmIChpbmRleDEgPiAtMSkge1xuICAgIGxldCBsU3RyID0gc3RyaW5nLnN1YnN0cigwLCBpbmRleDEpO1xuICAgIGxldCByU3RyID0gc3RyaW5nLnN1YnN0cihpbmRleDEgKyAxKTtcbiAgICBcbiAgICByZXR1cm4gY2FsY3VsYXRpb24obFN0cikgKyBjYWxjdWxhdGlvbihyU3RyKTtcbiAgICBcbiAgfSBlbHNlIGlmIChpbmRleDIgPiAtMSkge1xuICAgIGxldCBsU3RyID0gc3RyaW5nLnN1YnN0cigwLCBpbmRleDIpO1xuICAgIGxldCByU3RyID0gc3RyaW5nLnN1YnN0cihpbmRleDIgKyAxKTtcbiAgICBcbiAgICByZXR1cm4gY2FsY3VsYXRpb24obFN0cikgLSBjYWxjdWxhdGlvbihyU3RyKTtcbiAgICBcbiAgfSBlbHNlIGlmIChpbmRleDMgPiAtMSkge1xuICAgIGxldCBsU3RyID0gc3RyaW5nLnN1YnN0cigwLCBpbmRleDMpO1xuICAgIGxldCByU3RyID0gc3RyaW5nLnN1YnN0cihpbmRleDMgKyAxKTtcbiAgICBcbiAgICByZXR1cm4gY2FsY3VsYXRpb24obFN0cikgKiBjYWxjdWxhdGlvbihyU3RyKTtcbiAgfSBlbHNlIGlmIChpbmRleDQgPiAtMSkge1xuICAgIGxldCBsU3RyID0gc3RyaW5nLnN1YnN0cigwLCBpbmRleDQpO1xuICAgIGxldCByU3RyID0gc3RyaW5nLnN1YnN0cihpbmRleDQgKyAxKTtcbiAgICBcbiAgICBsZXQgbFZhbHVlID0gY2FsY3VsYXRpb24obFN0cik7XG4gICAgbGV0IHJWYWx1ZSA9IGNhbGN1bGF0aW9uKHJTdHIpO1xuICAgIFxuICAgIGlmIChyVmFsdWUgPT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBsVmFsdWUgLyByVmFsdWU7XG4gICAgfVxuICAgIFxuICB9IGVsc2Uge1xuICAgIGxldCByZXN1bHQgPSBOdW1iZXIoc3RyaW5nKTtcbiAgICBcbiAgICBpZiAoaXNOYU4ocmVzdWx0KSkge1xuICAgICAgcmV0dXJuIDA7IFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBcbiAgICBcbiAgfVxuICBcbn1cblxuQ29DcmVhdGVDYWxjdWxhdGlvbi5pbml0KCk7XG5cbkNvQ3JlYXRlT2JzZXJ2ZXIuaW5pdCh7IFxuXHRuYW1lOiAnQ29DcmVhdGVDYWxjdWxhdGlvbkNoYW5nZVZhbHVlJywgXG5cdG9ic2VydmU6IFsnYXR0cmlidXRlcyddLFxuXHRhdHRyaWJ1dGVzOiBbJ3ZhbHVlJ10sXG4gIGluY2x1ZGU6ICdpbnB1dCcsXG5cdGNhbGxiYWNrOiBmdW5jdGlvbihtdXRhdGlvbikge1xuXHQgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpXG5cdFx0Y29uc29sZS5sb2cobXV0YXRpb24udGFyZ2V0KVxuXHR9XG59KTtcblxuQ29DcmVhdGVPYnNlcnZlci5pbml0KHsgXG5cdG5hbWU6ICdDb0NyZWF0ZUNhbGN1bGF0aW9uSW5pdCcsIFxuXHRvYnNlcnZlOiBbJ3N1YnRyZWUnLCAnY2hpbGRMaXN0J10sXG4gIGluY2x1ZGU6ICdbZGF0YS1jYWxjdWxhdGlvbl0nLFxuXHRjYWxsYmFjazogZnVuY3Rpb24obXV0YXRpb24pIHtcblx0XHRDb0NyZWF0ZUNhbGN1bGF0aW9uLmluaXRDYWxjdWxhdGlvbkVsZW1lbnRzKG11dGF0aW9uLnRhcmdldClcblx0fVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IENvQ3JlYXRlQ2FsY3VsYXRpb247Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../CoCreate-calculation/src/index.js\n")}}]);